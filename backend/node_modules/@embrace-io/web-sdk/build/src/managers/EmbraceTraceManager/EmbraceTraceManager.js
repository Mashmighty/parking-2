'use strict';

var api = require('@opentelemetry/api');
var EmbraceExtendedSpan = require('./EmbraceExtendedSpan.js');
var attributes = require('../../constants/attributes.js');

class EmbraceTraceManager {
    startSpan(name, options = {}, ctx) {
        const tracer = api.trace.getTracer('embrace-web-sdk-traces');
        options.attributes = options.attributes ? options.attributes : {};
        options.attributes[attributes.KEY_EMB_TYPE] = attributes.EMB_TYPES.Perf;
        const activeContext = options.parentSpan ? api.trace.setSpan(api.context.active(), options.parentSpan) : ctx;
        return new EmbraceExtendedSpan.EmbraceExtendedSpan(tracer.startSpan(name, options, activeContext));
    }
    getSpan(context) {
        const span = api.trace.getSpan(context);
        if (span) {
            return new EmbraceExtendedSpan.EmbraceExtendedSpan(span);
        }
        return undefined;
    }
    constructor(){
        this.setSpan = api.trace.setSpan;
    }
}

exports.EmbraceTraceManager = EmbraceTraceManager;
//# sourceMappingURL=EmbraceTraceManager.js.map
